<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			// 1.
			// for (var i = 0; i < 5; i++) {
			// 	console.log(i)
			// }

			// 2.
			// for (var i = 0; i < 5; i++) {
			// 	setTimeout(function () {
			// 		// 但凡这里代码执行的时候，i 已经变成了 5
			// 		console.log(i)
			// 	}, 1000 * i)
			// }

			// 3.
			// for (var i = 0; i < 5; i++) {
			// 	;(function (i) {
			// 		setTimeout(function () {
			// 			console.log(i)
			// 		}, i * 1000)
			// 	})(i)
			// }

			// 4.
			// for (var i = 0; i < 5; i++) {
			// 	;(function () {
			// 		setTimeout(function () {
			// 			console.log(i)
			// 		}, i * 1000)
			// 	})(i)
			// }

			// 5.
			// for (var i = 0; i < 5; i++) {
			// 	setTimeout(
			// 		(function (i) {
			// 			console.log(i)
			// 		})(i),
			// 		i * 1000
			// 	)
			// }

			// 6.
			// setTimeout(function () {
			// 	console.log(1)
			// }, 0)

			// new Promise(function executor(resolve) {
			// 	console.log(2)
			// 	for (var i = 0; i < 10000; i++) {
			// 		i == 9999 && resolve()
			// 	}
			// 	console.log(3)
			// }).then(function () {
			// 	console.log(4)
			// })
			// console.log(5)

			// 7.
			// setTimeout(() => {
			// 	new Promise((resolve) => {
			// 		resolve()
			// 	}).then(() => {
			// 		console.log('test')
			// 	})

			// 	console.log(4)
			// })

			// new Promise((resolve) => {
			// 	resolve()
			// 	console.log(1)
			// }).then(() => {
			// 	console.log(3)
			// 	Promise.resolve()
			// 		.then(() => {
			// 			console.log('before timeout')
			// 		})
			// 		.then(() => {
			// 			Promise.resolve().then(() => {
			// 				console.log('also before timeout')
			// 			})
			// 		})
			// })
			// console.log(2)

			// 8.
			// setTimeout(() => {
			// 	new Promise((resolve) => {
			// 		resolve()
			// 	}).then(() => {
			// 		console.log('test')
			// 	})

			// 	console.log(4)
			// 	// #1
			// 	setTimeout(function () {
			// 		Promise.resolve().then((res) => {
			// 			console.log(444)
			// 		})
			// 	})
			// 	Promise.resolve().then((res) => {
			// 		console.log(888)
			// 	})
			// })

			// new Promise((resolve) => {
			// 	resolve()
			// 	console.log(1)
			// }).then(() => {
			// 	console.log(3)
			// 	// #2
			// 	setTimeout(function () {
			// 		Promise.resolve()
			// 			.then(() => {
			// 				console.log('before timeout')
			// 			})
			// 			.then(() => {
			// 				Promise.resolve().then(() => {
			// 					console.log('also before timeout')
			// 				})
			// 			})
			// 	})
			// })
			// console.log(2)

			// 9.
			// setTimeout(() => {
			// 	console.log(1)
			// })

			// Promise.resolve().then(() => {
			// 	console.log(2)
			// })

			// Promise.resolve().then(() => {
			// 	console.log(4)
			// })
			// console.log(3)

			// 10.
			// setTimeout(function () {
			// 	console.log(1)
			// })
			// new Promise((resolve) => {
			// 	console.log(2)
			// 	resolve()
			// })
			// 	.then(() => {
			// 		console.log(3)
			// 	})
			// 	.then(() => {
			// 		console.log(4)
			// 	})
			// console.log(5)

			// 11.
			// const first = () =>
			// 	new Promise((resolve, reject) => {
			// 		console.log(3)

			// 		let p = new Promise((resolve, reject) => {
			// 			console.log(7)

			// 			setTimeout(() => {
			// 				console.log(5)
			// 				resolve(6)
			// 			})

			// 			resolve(1)
			// 		})

			// 		resolve(2)

			// 		p.then((arg) => {
			// 			console.log(arg)
			// 		})
			// 	})

			// first().then((arg) => {
			// 	console.log(arg)
			// })
			// console.log(4)

			// 12.
			// Promise.resolve()
			// 	.then(() => {
			// 		// #1
			// 		console.log(1)
			// 		Promise.resolve()
			// 			.then((r) => {
			// 				// #3
			// 				console.log(3)
			// 			})
			// 			.then((r) => {
			// 				console.log(4)
			// 			})
			// 		// #mark
			// 	})
			// 	.then((r) => {
			// 		// #2
			// 		console.log(2)
			// 	})

			// 13.
			// setTimeout(function () {
			// 	console.log(1)
			// })
			// new Promise((resolve) => {
			// 	console.log(2)
			// 	resolve()
			// })
			// 	.then(() => {
			// 		console.log(3)
			// 	})
			// 	.then(() => {
			// 		console.log(4)
			// 	})
			// console.log(5)

			// 14.
			// Promise.resolve()
			// 	.then(() => {
			// 		Promise.resolve()
			// 			.then((r) => {
			// 				// #1
			// 				console.log(1)
			// 			})
			// 			.then((r) => {
			// 				// #3
			// 				console.log(3)
			// 			})
			// 			.then((r) => {
			// 				// #5
			// 				console.log(5)
			// 			})
			// 		// #mark
			// 	})
			// 	.then((r) => {
			// 		// #2
			// 		console.log(2)
			// 	})
			// 	.then(() => {
			// 		// #4
			// 		console.log(4)
			// 	})

			// 15.
			// setTimeout(function () {
			// 	console.log(0)
			// })

			// new Promise((resolve, reject) => {
			// 	console.log(1)
			// 	resolve()
			// })
			// 	.then(() => {
			// 		// 执行此微的时候又会产生两个微
			// 		console.log(2)
			// 		new Promise((resolve, reject) => {
			// 			console.log(3)
			// 			resolve()
			// 		})
			// 			.then(() => {
			// 				console.log(4)
			// 			})
			// 			.then(() => {
			// 				console.log(5)
			// 			})
			// 	})
			// 	.then(() => {
			// 		console.log(6)
			// 	})

			// new Promise((resolve, reject) => {
			// 	console.log(7)
			// 	resolve()
			// }).then(() => {
			// 	console.log(8)
			// })

			// 16.
			function func(num) {
				return function () {
					// #1
					console.log(num)
				}
			}
			setTimeout(func(1))

			async function async3() {
				await async4()
				// #2
				console.log(8)
			}
			async function async4() {
				console.log(5)
			}
			async3()
			function func2() {
				// #3
				console.log(2)
				async function async1() {
					await async2()
					// #6
					console.log(9)
				}
				async function async2() {
					console.log(5)
				}
				async1()
				setTimeout(func(4))
			}
			setTimeout(func2)

			setTimeout(func(3))

			new Promise((resolve) => {
				console.log('Promise')
				resolve()
			})
				// #4
				.then(() => console.log(6))
				// #5
				.then(() => console.log(7))
			console.log(0)
		</script>
	</body>
</html>
